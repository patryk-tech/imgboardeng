{% extends 'base.html' %} {% load static %}
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <style>

    .hidden{
      display: none;
    }
    </style>
</head>

<body>
    {%block body%}
    <br>

    <center>
        <div class='container' id='form_top'>

            <form method='post' enctype="multipart/form-data" autocomplete="off">
                {% csrf_token %}
                <p>Email: {{form.op_email}}</p>
                <p>Title: {{form.thread_title}}</p>
                <p id='thread_text'> {{form.thread_body}}</p>
                <p>{{form.image}}</p>
                <button class='btn btn-primary' type='submit' value='post_thread' name='post_thread'>Submit</button>
            </form>
    </center>

    </div>
    {%load thumbnail%}
    
    <form method=post>
    {%for thread in q2 %}
    <div class='thread'style='margin-left: 30px;
    margin-right: 30px;
    clear: both; margain-top: 150;
    overflow: hidden;'>
    <div class='constainer' style='margin-left: 30px;
            maragin-right: 30px;
            clear: both;margin-right: 550;
    margin-bottom: 30;
            '><div class='post' style='display:block;'>
        <div class='thread_title' style='    padding: 5px;
            background-color: #ACD7DE; margin-bottom:10px;
            width: 10000;    display: block;
    position: relative; maargin-top:10a0;
'><input type='radio' name='rep_choice' value='{{thread.id}}'></input>{%if thread.thread_title %} <span class='title'>{{thread.thread_title}}</span> {% endif %} {%if thread.email%}
            <a href='mailto:{{thread.email}}'>Anonymouos</a> {%else%}
            <span class='name'> Anonymous</span> {%endif%}
            <span class='date'> {{thread.date}} </span>
            <span class='post_number'> post number: <a href='#'>{{thread.count}}</a> </span><span>  <a href='{% url "obiadekchan:thread" thread.id %}'>[Reply]</a></span></div>

        {%if thread.image%} {%thumbnail thread.image "240" as im %}
        <a href='{{thread.image.url}}' target="_blank" style='    float: left;
           margin-left: 20px;
           margin-right: 20px;
           margin-top: 3px;
           margin-bottom: 0;
           position: relative; display: block; margin-bottom: 20;
       '><img src='{{im.url}}' /></a>
        {%endthumbnail%} {%endif%}
        <pre style='display: block;    white-space: pre-wrap;  
           margin-block-start: 1em;
           margin-block-end: 1em;
           margin-inline-start: 40px;
           margin-inline-end: 40px;overflow-wrap: break-word; font-family: Verdana, "Bitstream Vera Sans", Geneva, sans-serif !important; '>{{thread.thread_body}}</pre>
            
        </div>
        <a href='{% url "obiadekchan:thread" thread.id %}'>Show more</a>

    </div>
   



    {%for answer in thread.thread_ans.all %}
    <div class='constainer' style='    display: block; boarder:solid; border-radius: 5px; baorder-color: darkgoldenrod; background: #ACD7DE;
            max-width: 100ch;margin-right: 550;
    margin-left: 360;'><div classs='post' style='padding: 5px;
    display: inline-block;
    margin-right: 10px;
    margin-left: 22px;'>
        <div class='answer_title'>{%if answer.answer_title %} <span class='title'>{{answer.answer_title}}</span> {% endif %}<input type='radio' name='a_rep_choice' value='{{answer.id}}'></input> {%if answer.email%}
            <a href='mailto:{{answer.email}}'>Anonymous</a> {%else%}
            <span class='name'> Anonymous</span> {%endif%}
            <span class='date'> {{answer.date}} </span>
            <span class='post_number'> post number: <a href='#'>{{answer.count}}</a> </span></div>
        {%if answer.image%} {%thumbnail answer.image "240" as ima %}
        <div class='answer_img'>
            <a href='{{answer.image.url}}' target="_blank" style='    float: left;
            margin-left: 20px;
            margin-right: 20px;
            margin-top: 3px;
            margin-bottom: 0;
            position: relative; display: block;
        '><img src='{{ima.url}}' /></a>
        </div>
        {%endthumbnail%} {%endif%}
        <div class='p_body'><pre style='margin-block-start: 1em;
                    margin-block-end: 1em;     white-space: pre-wrap;  
                    margin-inline-start: 40px;
                    margin-inline-end: 40px; overflow-wrap: break-word;font-family: Verdana, "Bitstream Vera Sans", Geneva, sans-serif !important;
                    '>{{answer.answer_body}}</pre></div>

   

    </div>
</div>

    <br>
  
    {%endfor%} </div> <br>{%endfor%}
<br><br>
    <button type='button' style='float:right;    margin-top: 100;' data-toggle="modal" data-target='#t_banResModal'>
        Submit thread report</button>

    <!-- Modal -->
    <div class="modal fade" id="t_banResModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Reason</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {%csrf_token%}
                        <p>Reason:
                            <input class="u-full-width" type="text" name="r_reason" style='border-radius:0px' />
                        </p>
                        <button type="submit" class="btn btn-primary" name='report_thread' >Report</button>
                    

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                </div>
            </div>
        </div>
    </div>


</form>

    <div class='container' style=' margin-top: 100;'>
        <div class="pagination">
            <span class="step-links">
                    {% if q2.has_previous %}
                        <a href="?page=1">&laquo; first</a>
                        <a href="?page={{ q2.previous_page_number }}">previous</a>
                    {% endif %}

                    <span class="current">
                        Page {{ q2.number }} of {{ q2.paginator.num_pages }}.
                    </span> {% if q2.has_next %}
            <a href="?page={{ q2.next_page_number }}">next</a>
            <a href="?page={{ q2.paginator.num_pages }}">last &raquo;</a> {% endif %}
            </span>
        </div>
    </div>
  {%endblock%}



</body>

</html>